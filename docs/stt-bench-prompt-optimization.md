# Voxtral STT プロンプト最適化ベンチマーク (stt-bench4)

**実施日:** 2026-02-13
**モデル:** Voxtral-Mini-3B-2507 (vLLM v0.10.0, A100 GPU)
**TTS:** AivisSpeech (mirai, WAV 44.1kHz mono)
**テスト文:** 50文（5カテゴリ×10）

## 総合結果

| Combo | Accuracy | Correct | Avg Time |
|-------|----------|---------|----------|
| **C_english_mt50** | **44.0%** | 22/50 | 0.264s |
| **C_english_mt100** | **44.0%** | 22/50 | 0.275s |
| A_strict_mtnone | 42.0% | 21/50 | 0.285s |
| A_strict_mt50 | 42.0% | 21/50 | 0.247s |
| A_strict_mt100 | 42.0% | 21/50 | 0.248s |
| C_english_mtnone | 40.0% | 20/50 | 0.517s |
| D_constrained_mtnone | 36.0% | 18/50 | 0.379s |
| D_constrained_mt100 | 36.0% | 18/50 | 0.285s |
| D_constrained_mt50 | 34.0% | 17/50 | 0.271s |
| B_format_mtnone | 30.0% | 15/50 | 0.273s |
| B_format_mt50 | 28.0% | 14/50 | 0.249s |
| B_format_mt100 | 28.0% | 14/50 | 0.249s |
| E_original_mtnone | 18.0% | 9/50 | 0.262s |
| E_original_mt50 | 18.0% | 9/50 | 0.262s |
| E_original_mt100 | 18.0% | 9/50 | 0.262s |

## カテゴリ別精度（max_tokens=none）

| プロンプト | 日常会話 | 数字・固有名詞 | 技術用語 | 質問文 | 長文 |
|-----------|---------|-------------|---------|-------|------|
| A_strict | 8/10 (80%) | 4/10 (40%) | 2/10 (20%) | 4/10 (40%) | 3/10 (30%) |
| B_format | 7/10 (70%) | 1/10 (10%) | 2/10 (20%) | 4/10 (40%) | 1/10 (10%) |
| C_english | 9/10 (90%) | 2/10 (20%) | 1/10 (10%) | 5/10 (50%) | 3/10 (30%) |
| D_constrained | 7/10 (70%) | 2/10 (20%) | 3/10 (30%) | 3/10 (30%) | 3/10 (30%) |
| E_original | 3/10 (30%) | 1/10 (10%) | 3/10 (30%) | 0/10 (0%) | 2/10 (20%) |

## プロンプト定義

| ID | プロンプト |
|----|---------|
| A_strict | 以下の音声を正確に日本語で書き起こしてください。音声に含まれる言葉のみを出力し、説明や補足は一切追加しないでください。 |
| B_format | 音声認識タスク: 入力された音声の内容をそのまま文字に起こしてください。出力は書き起こしテキストのみ。 |
| C_english | Transcribe the following Japanese audio exactly as spoken. Output only the transcribed text, nothing else. |
| D_constrained | あなたは音声認識システムです。入力された音声を忠実にテキストに変換してください。ルール: 1.音声の内容のみ出力 2.推測や補完をしない 3.聞き取れない部分は[不明]と表記 |
| E_original | Transcribe this audio. |

## 分析

### 主要な発見

1. **ベストプロンプト: C_english (英語プロンプト) + max_tokens=50** → 44.0%
   - 日常会話で90%の高精度
   - ただし前回の48%から改善なし（むしろ微減）

2. **max_tokensの影響は限定的**
   - 同じプロンプトではmax_tokens 50/100/noneでほぼ同じ精度
   - C_englishのみnone(40%) < 50/100(44%)で微改善（max_tokens制限で無駄な出力が減る）

3. **プロンプト言語の影響が大きい**
   - E_original("Transcribe this audio.")は18%と最低 → 英語に翻訳してしまう
   - C_english("Transcribe the following **Japanese** audio")は44% → "Japanese"指定が重要
   - A_strict(日本語プロンプト)は42%で安定

4. **カテゴリ別の弱点**
   - **数字・固有名詞**: 全プロンプトで10-40%（数字表記の揺れ: 3万5千800円→35,800円）
   - **技術用語**: 10-30%（英字の読み間違い: API→DPI, GitHub→KitHub, プルリクエスト→ブルリクエスト）
   - **長文**: 10-30%（言い換え・意訳が発生）
   - **日常会話**: 70-90%で最も高精度

5. **Voxtralの根本的な問題**
   - LLMとしての「意訳」「言い換え」癖がSTTに不向き
   - 「お疲れ様でした」→「おつかれさまでした」（ひらがな変換）
   - 「北緯35度東経139度」→「国際標準大気圧で35度、気温で139度」（意味不明な変換）
   - 数字のフォーマット変換（3万5千800円→35,800円）
   - 一部で英語・韓国語への翻訳が発生

### 前回(stt-bench3)との比較

- 前回: 48%（プロンプト不明、おそらくシンプルなもの）
- 今回ベスト: 44%（C_english_mt50）
- **改善なし** — プロンプトエンジニアリングだけでは限界

### 結論

Voxtral-Mini-3Bは音声認識専用モデルではなくマルチモーダルLLMのため、
プロンプトを工夫しても根本的な「意訳」問題を解決できない。
精度44%はWhisper等の専用STTモデルには遠く及ばない。

**推奨:**
- Voxtralを使うなら: `C_english` + `max_tokens=50` が最適
- 高精度STTが必要なら: Whisper系の専用モデルを検討すべき
